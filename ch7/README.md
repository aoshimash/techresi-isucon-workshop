# ISUCON本ゆる輪読会#9

## 1. Web サービスにおけるキャッシュ
頻繁に更新処理が行われないようなデータは、そのデータをキャッシュすることでデータベースや外部 API へのアクセスを抑え、高速化につながる場合がある。

しかし、キャッシュは扱いが難しく、バグを生みやすい。キャッシュによって生じたバグをデバッグするのもまた大変。本当に必要なところにおいてのみ使うべき。

Web アプリケーションにおけるキャッシュは、主に次の 2 つがある：
- アプリケーションレイヤでのキャッシュ：高速なストレージ経由で返す
- HTTP レイヤでのキャッシュ：そもそもレスポンスを返さない

今回はアプリケーションレイヤでのキャッシュの話をする。

TODO: 画像

## 2. キャッシュデータ保存に利用されるミドルウェア

### 2.1 必要機能
基本的に、以下の 2 つの機能が必要：
- key から value が取得できる KVS としての機能
- TTL (Time To Live) を定められ、TTL が過ぎたらデータを削除する機能
  - stale になってしまったデータを自動で削除するため

### 2.2 memcached と Redis

### 2.3 インメモリキャッシュとファイルキャッシュ

## 3. キャッシュを KVS に保存する際の注意点

## 4. いつキャッシュを利用するか

## 5. 具体的なキャッシュ実装方法
今回の例は全てインメモリキャッシュ

### 5.1 キャッシュにデータがなければキャッシュを生成して生成結果を保存する方法
### 5.2 キャッシュがなければデフォルト値や古いキャッシュを返し、非同期にキャッシュ更新処理を実行する
### 5.3 バッチ処理などで定期的にキャッシュを更新する
### 5.4 memcached を用いた private-isu のキャッシング

##　6 キャッシュを監視する